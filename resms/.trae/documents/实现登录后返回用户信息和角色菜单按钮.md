# 实现登录后返回用户信息和角色菜单按钮

## 需求分析
根据SQL文件和现有代码，我需要实现登录后返回用户id、用户名、用户头像地址、token和不同角色加载的菜单和按钮。

## 实现步骤

### 1. 修改LoginResponseVo类
- 添加`avatar`字段，用于返回用户头像地址
- 添加`permissionMenus`字段，用于返回用户菜单权限

### 2. 修改PermissionMapper接口
- 添加`selectPermissionMenusByUserId`方法，用于根据用户ID获取菜单权限

### 3. 修改PermissionMapper.xml
- 添加`selectPermissionMenusByUserId`的SQL实现，查询用户所属角色的所有菜单权限

### 4. 修改UserService接口
- 添加`getUserPermissionMenus`方法，用于获取用户菜单权限

### 5. 修改UserServiceImpl实现类
- 实现`getUserPermissionMenus`方法，调用PermissionMapper获取菜单权限

### 6. 修改UserController
- 在登录方法中，添加获取用户头像的逻辑
- 添加获取用户菜单权限的逻辑
- 将头像、菜单权限和按钮权限返回给前端

## 技术要点

1. **菜单权限查询**：根据用户ID，通过用户-角色-权限的关联关系，查询出用户所属角色的所有菜单权限
2. **按钮权限查询**：复用现有的`getUserPermissionButtons`方法，获取用户的按钮权限
3. **响应结构**：统一返回格式，包含用户基本信息、token、菜单权限和按钮权限
4. **角色管理**：根据用户的`role_type`字段，返回不同角色的菜单和按钮权限

## 实现注意事项

1. 确保SQL查询性能，使用JOIN语句优化查询
2. 确保权限数据的准确性，只返回启用状态的权限
3. 确保响应数据的安全性，不返回敏感信息
4. 确保代码的可维护性，遵循现有代码风格

## 预期效果

登录成功后，前端将收到包含以下信息的响应：
- 用户ID
- 用户名
- 真实姓名
- 用户头像地址
- JWT令牌
- 角色类型
- 菜单权限列表
- 按钮权限列表

这样，前端可以根据不同角色的权限，动态加载对应的菜单和按钮。